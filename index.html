<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="papaparse.min.js"></script>
</head>
<body>
    <input type="file" id="uploadfile" onChange="readImage(this)">
<textarea id="abc">

</textarea>
    <script>
        var obj_csv = {
    size:0,
    dataFile:[]
};
 
function readImage(input) {
    console.log(input)
 if (input.files && input.files[0]) {
 let reader = new FileReader();
        reader.readAsBinaryString(input.files[0]);
 reader.onload = function (e) {
 console.log(e);
 obj_csv.size = e.total;
 obj_csv.dataFile = e.target.result
            console.log(obj_csv.dataFile)
            parseData(obj_csv.dataFile)
            
 }
 }
}
 
function parseData(data){
    let csvData = [];
    let lbreak = data.split("\n");
    let a = true;
    lbreak.forEach(res => {
        if(a){
            a=false;
            return;
        }
        csvData.push(res.split(","));
    });

    var temp = [];
    var d='';
    var i = 0;
    csvData.forEach(element => {
        if(element[0]==""){
            return;
        }
        temp[i]=[];
        d+="[";
        element.forEach(e => {
            e = e.replace(/(\r\n|\n|\r)/gm,"")
            d+="'"+e+"',";
            temp[i].push(e.trim());

        });
        d=d.slice(0, -1);
        d+="],";
        i++
    });
    d=d.slice(0, -1);

  




    console.table(b);
    var x = 'script';
    var b=`
    <div dir='rtl'>
    <h3>بحث</h3>

    <input type="text" id="myText" value="">



    <button onclick="myFunction()">بحث</button>

    <p id="demo"></p>

    <script>
        var x;
        function checkid(row) {
            return row[0] == x;
        }
        function myFunction() {
            x = document.getElementById("myText").value;
            var data = [`+d+`];

            var a = data.find(checkid);
            if (a != undefined) {

                document.getElementById("demo").innerHTML = a[1];
            }


        }
    `+`</`+ x +`>
    </div>
    `;
    console.log(b);
    document.getElementById("abc").innerHTML = b;
}
    </script>
</body>
</html>